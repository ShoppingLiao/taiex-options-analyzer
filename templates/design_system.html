<!--
===========================================
台指選擇權分析系統 - Design System v1.0
===========================================
本文件定義所有頁面共用的設計規範與樣式組件
所有視覺調整只需修改此文件即可

使用方式：
在 Jinja2 模板中引入：{% include 'design_system.html' %}
===========================================
-->

<style>
    /* ===========================================
       1. Design Tokens (設計變數)
       =========================================== */
    :root {
        /* 1.1 色彩系統 */
        --primary-color: #2563eb;      /* 主色調 - 藍色 */
        --primary-dark: #1d4ed8;       /* 主色調深色 */
        --success-color: #22c55e;      /* 成功/看多 - 綠色 */
        --success-dark: #16a34a;       /* 成功深色 */
        --danger-color: #ef4444;       /* 危險/看空 - 紅色 */
        --danger-dark: #dc2626;        /* 危險深色 */
        --warning-color: #f59e0b;      /* 警告/中性 - 橙色 */
        --warning-dark: #d97706;       /* 警告深色 */
        --purple-color: #8b5cf6;       /* 紫色 - AI/特殊 */
        --purple-dark: #7c3aed;        /* 紫色深色 */
        
        /* Call/Put 特殊色 */
        --call-color: #ef4444;         /* Call - 紅色 */
        --put-color: #22c55e;          /* Put - 綠色 */
        
        /* 中性色系 */
        --bg-color: #f8fafc;           /* 背景色 */
        --card-bg: #ffffff;            /* 卡片背景 */
        --text-color: #1e293b;         /* 主文字色 */
        --text-muted: #64748b;         /* 次要文字色 */
        --border-color: #e2e8f0;       /* 邊框色 */
        
        /* 1.2 字體系統 (Desktop) */
        --font-xxl: 3rem;              /* 超大標題 48px */
        --font-xl: 2.5rem;             /* 大標題 40px */
        --font-lg: 2rem;               /* 標題 32px */
        --font-md: 1.5rem;             /* 中標題 24px */
        --font-base: 1.3rem;           /* 基礎大小 20.8px */
        --font-sm: 1.1rem;             /* 小字 17.6px */
        --font-xs: 0.95rem;            /* 更小字 15.2px */
        --font-xxs: 0.85rem;           /* 極小字 13.6px */
        --font-micro: 0.75rem;         /* 微小字 12px */
        
        /* 1.3 字體系統 (Mobile) - 縮減約30-40% */
        --font-xxl-mobile: 2rem;       /* 32px */
        --font-xl-mobile: 1.5rem;      /* 24px */
        --font-lg-mobile: 1.3rem;      /* 20.8px */
        --font-md-mobile: 1.2rem;      /* 19.2px */
        --font-base-mobile: 1rem;      /* 16px */
        --font-sm-mobile: 0.9rem;      /* 14.4px */
        --font-xs-mobile: 0.85rem;     /* 13.6px */
        --font-xxs-mobile: 0.75rem;    /* 12px */
        --font-micro-mobile: 0.7rem;   /* 11.2px */
        
        /* 1.4 間距系統 */
        --space-xs: 8px;
        --space-sm: 12px;
        --space-md: 16px;
        --space-lg: 20px;
        --space-xl: 24px;
        --space-xxl: 30px;
        --space-xxxl: 40px;
        
        /* Mobile 間距 (縮減50%) */
        --space-xs-mobile: 4px;
        --space-sm-mobile: 6px;
        --space-md-mobile: 8px;
        --space-lg-mobile: 10px;
        --space-xl-mobile: 12px;
        --space-xxl-mobile: 15px;
        --space-xxxl-mobile: 20px;
        
        /* 1.5 圓角系統 */
        --radius-sm: 8px;
        --radius-md: 12px;
        --radius-lg: 16px;
        
        /* 1.6 陰影系統 */
        --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
        --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.1);
        --shadow-hover: 0 8px 24px rgba(0, 0, 0, 0.15);
        
        /* 1.7 其他設計參數 */
        --border-width: 2px;
        --border-width-thick: 4px;
        --transition-speed: 0.3s;
    }

    /* ===========================================
       2. Global Styles (全域樣式)
       =========================================== */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: var(--text-color);
        line-height: 1.6;
        min-height: 100vh;
    }

    /* ===========================================
       3. Layout Components (佈局組件)
       =========================================== */
    
    /* 3.1 Container */
    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: var(--space-lg);
    }

    .container-wide {
        max-width: 1400px;
        margin: 0 auto;
        padding: var(--space-lg);
    }

    @media (max-width: 768px) {
        .container,
        .container-wide {
            padding: var(--space-sm-mobile);
        }
    }

    /* 3.2 Section */
    .section {
        background: var(--card-bg);
        border-radius: var(--radius-lg);
        padding: var(--space-xxl);
        margin-bottom: var(--space-xxl);
        box-shadow: var(--shadow-md);
    }

    @media (max-width: 768px) {
        .section {
            padding: var(--space-lg-mobile);
            margin-bottom: var(--space-xxl-mobile);
        }
    }

    /* 3.3 Section Header */
    .section-header {
        display: flex;
        align-items: center;
        margin-bottom: var(--space-xl);
        padding-bottom: var(--space-md);
        border-bottom: var(--border-width) solid var(--border-color);
    }

    .section-icon {
        font-size: var(--font-lg);
        margin-right: var(--space-sm);
    }

    .section-title {
        font-size: var(--font-md);
        font-weight: 700;
        color: var(--text-color);
        margin: 0;
    }

    .section-count {
        margin-left: auto;
        background: var(--bg-color);
        color: var(--text-muted);
        padding: var(--space-xs) var(--space-sm);
        border-radius: var(--radius-md);
        font-size: var(--font-xs);
        font-weight: 600;
    }

    .section-description {
        color: var(--text-muted);
        margin-bottom: var(--space-lg);
        font-size: var(--font-xs);
    }

    /* 3.4 Section Content */
    .section-content {
        background: var(--card-bg);
        padding: var(--space-xl);
        border-radius: var(--radius-sm);
        border-left: var(--border-width-thick) solid var(--primary-color);
        box-shadow: var(--shadow-md);
        line-height: 1.9;
        white-space: pre-wrap;
        font-size: 0.95rem;
        color: #3c3c3c;
    }

    /* 不同主題顏色的 section-content */
    .section-content.success {
        border-left-color: var(--success-color);
    }

    .section-content.danger {
        border-left-color: var(--danger-color);
        background: #fef2f2;
    }

    .section-content.warning {
        border-left-color: var(--warning-color);
    }

    .section-content.purple {
        border-left-color: var(--purple-color);
    }

    @media (max-width: 768px) {
        .section-icon {
            font-size: var(--font-lg-mobile);
        }
        .section-title {
            font-size: var(--font-md-mobile);
        }
        .section-count {
            font-size: var(--font-xxs-mobile);
        }
        .section-content {
            padding: var(--space-lg-mobile);
            font-size: 0.85rem;
        }
    }
    }

    /* ===========================================
       4. Card Components (卡片組件)
       =========================================== */
    
    /* 4.1 Basic Card */
    .card {
        background: var(--card-bg);
        border-radius: var(--radius-md);
        padding: var(--space-md);
        box-shadow: var(--shadow-sm);
        border: 1px solid var(--border-color);
    }

    @media (max-width: 768px) {
        .card {
            padding: var(--space-sm-mobile);
        }
    }

    /* 4.2 Data Card (用於顯示數據) */
    .data-card {
        background: var(--card-bg);
        border-radius: var(--radius-md);
        padding: var(--space-md);
        box-shadow: var(--shadow-sm);
    }

    .data-card-label {
        font-size: var(--font-xxs);
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: var(--space-xs);
    }

    .data-card-value {
        font-size: var(--font-lg);
        font-weight: 700;
    }

    .data-card-subtitle {
        font-size: var(--font-xxs);
        color: var(--text-muted);
        margin-top: var(--space-xs);
    }

    @media (max-width: 768px) {
        .data-card {
            padding: var(--space-sm-mobile);
        }
        .data-card-label {
            font-size: var(--font-micro-mobile);
        }
        .data-card-value {
            font-size: var(--font-base-mobile);
        }
    }

    /* 4.3 Horizontal Data Bar (單行數據條) */
    .data-bar {
        background: var(--card-bg);
        padding: var(--space-sm) var(--space-md);
        border-radius: var(--radius-sm);
        border-left: var(--border-width-thick) solid var(--primary-color);
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-lg);
    }

    .data-bar-label {
        font-size: var(--font-xxs);
        color: var(--text-color);
        font-weight: 600;
    }

    .data-bar-value {
        font-size: var(--font-base);
        font-weight: 700;
        color: var(--primary-color);
    }

    .data-bar-hint {
        font-size: var(--font-micro);
        color: var(--text-muted);
    }

    /* Border color variants */
    .data-bar.primary { border-left-color: var(--primary-color); }
    .data-bar.success { border-left-color: var(--success-color); }
    .data-bar.danger { border-left-color: var(--danger-color); }
    .data-bar.warning { border-left-color: var(--warning-color); }
    .data-bar.purple { border-left-color: var(--purple-color); }

    @media (max-width: 768px) {
        .data-bar {
            padding: var(--space-md-mobile) var(--space-lg-mobile);
            margin-bottom: var(--space-lg-mobile);
        }
        .data-bar-label {
            font-size: var(--font-xxs-mobile);
        }
        .data-bar-value {
            font-size: var(--font-md-mobile);
        }
        .data-bar-hint {
            font-size: var(--font-micro-mobile);
        }
    }

    /* 4.4 Info Card (帶圖標的資訊卡片) */
    .info-card {
        background: var(--bg-color);
        border-radius: var(--radius-md);
        padding: var(--space-lg);
        border-left: var(--border-width-thick) solid var(--primary-color);
    }

    .info-card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-sm);
    }

    .info-card-title {
        font-weight: 600;
        font-size: var(--font-sm);
    }

    .info-card-badge {
        background: var(--card-bg);
        padding: var(--space-xs) var(--space-sm);
        border-radius: var(--radius-md);
        font-size: var(--font-xxs);
        font-weight: 600;
    }

    .info-card-content {
        color: var(--text-color);
        line-height: 1.8;
    }

    /* Border variants */
    .info-card.primary { border-left-color: var(--primary-color); }
    .info-card.success { border-left-color: var(--success-color); }
    .info-card.danger { border-left-color: var(--danger-color); }
    .info-card.warning { border-left-color: var(--warning-color); }
    .info-card.purple { border-left-color: var(--purple-color); }

    /* ===========================================
       5. Header Components (頁首組件)
       =========================================== */
    
    /* 5.1 Page Header */
    .page-header {
        background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
        color: white;
        padding: var(--space-xxl) var(--space-lg);
        margin-bottom: var(--space-xxl);
        border-radius: var(--radius-md);
        position: relative;
    }

    .page-header h1 {
        font-size: var(--font-lg);
        margin-bottom: var(--space-lg);
    }

    .page-header .subtitle {
        font-size: var(--font-sm);
        opacity: 0.9;
    }

    @media (max-width: 768px) {
        .page-header {
            padding: var(--space-lg-mobile);
            margin-bottom: var(--space-xxl-mobile);
            text-align: center;
        }
        .page-header h1 {
            font-size: var(--font-xl-mobile);
        }
        .page-header .subtitle {
            font-size: var(--font-sm-mobile);
        }
    }

    /* 5.2 Info Items (Header 資訊列) */
    .info-items {
        display: flex;
        gap: var(--space-xxl);
        margin-top: var(--space-lg);
        padding-top: var(--space-lg);
        border-top: var(--border-width) solid rgba(255, 255, 255, 0.2);
    }

    .info-item {
        flex: 1;
    }

    .info-label {
        font-size: var(--font-xxs);
        opacity: 0.8;
        margin-bottom: var(--space-xs);
    }

    .info-value {
        font-size: var(--font-base);
        font-weight: 700;
    }

    @media (max-width: 768px) {
        .info-items {
            overflow-x: auto;
            gap: var(--space-md-mobile);
            padding-top: var(--space-lg-mobile);
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.3) transparent;
            -webkit-overflow-scrolling: touch;
        }
        .info-items::-webkit-scrollbar {
            height: 3px;
        }
        .info-items::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 5px;
        }
        .info-item {
            flex-shrink: 0;
            min-width: 120px;
        }
        .info-label {
            font-size: var(--font-micro-mobile);
        }
        .info-value {
            font-size: var(--font-base-mobile);
        }
    }

    /* ===========================================
       6. Tab Components (標籤頁組件)
       =========================================== */
    
    .tabs-container {
        display: flex;
        gap: var(--space-sm);
        margin-bottom: var(--space-xxl);
        background: var(--card-bg);
        padding: var(--space-sm);
        border-radius: var(--radius-md);
        box-shadow: var(--shadow-sm);
    }

    .tab-button {
        flex: 1;
        padding: var(--space-md) var(--space-lg);
        background: transparent;
        border: none;
        border-radius: var(--radius-sm);
        font-size: var(--font-xs);
        font-weight: 600;
        color: var(--text-muted);
        cursor: pointer;
        transition: all var(--transition-speed) ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--space-xs);
    }

    .tab-button:hover {
        background: var(--bg-color);
        color: var(--text-color);
    }

    .tab-button.active {
        background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
        color: white;
        box-shadow: var(--shadow-sm);
    }

    .tab-icon {
        font-size: var(--font-sm);
    }

    @media (max-width: 768px) {
        .tabs-container {
            overflow-x: auto;
            padding: var(--space-sm-mobile);
            gap: var(--space-xs-mobile);
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) transparent;
            -webkit-overflow-scrolling: touch;
        }
        .tabs-container::-webkit-scrollbar {
            height: 3px;
        }
        .tabs-container::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 5px;
        }
        .tab-button {
            flex-shrink: 0;
            padding: var(--space-md-mobile) var(--space-lg-mobile);
            font-size: var(--font-xxs-mobile);
        }
        .tab-icon {
            font-size: var(--font-xs-mobile);
        }
    }

    .tab-content {
        display: none;
    }

    .tab-content.active {
        display: block;
        animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    /* ===========================================
       7. Grid & Layout (網格佈局)
       =========================================== */
    
    /* 7.1 Responsive Grid */
    .grid {
        display: grid;
        gap: var(--space-sm);
    }

    .grid-2 { grid-template-columns: repeat(2, 1fr); }
    .grid-3 { grid-template-columns: repeat(3, 1fr); }
    .grid-4 { grid-template-columns: repeat(4, 1fr); }

    /* Auto-fit grid */
    .grid-auto-sm { 
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); 
    }
    .grid-auto-md { 
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
    }
    .grid-auto-lg { 
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); 
    }

    @media (max-width: 768px) {
        .grid {
            gap: var(--space-xs-mobile);
        }
        .grid-4,
        .grid-3 {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    /* 7.2 Flex Layouts */
    .flex {
        display: flex;
    }

    .flex-col {
        display: flex;
        flex-direction: column;
    }

    .flex-center {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .flex-between {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .gap-sm { gap: var(--space-sm); }
    .gap-md { gap: var(--space-md); }
    .gap-lg { gap: var(--space-lg); }

    /* ===========================================
       8. Typography (文字樣式)
       =========================================== */
    
    .text-xxl { font-size: var(--font-xxl); }
    .text-xl { font-size: var(--font-xl); }
    .text-lg { font-size: var(--font-lg); }
    .text-md { font-size: var(--font-md); }
    .text-base { font-size: var(--font-base); }
    .text-sm { font-size: var(--font-sm); }
    .text-xs { font-size: var(--font-xs); }
    .text-xxs { font-size: var(--font-xxs); }

    .font-bold { font-weight: 700; }
    .font-semibold { font-weight: 600; }
    .font-medium { font-weight: 500; }

    .text-primary { color: var(--primary-color); }
    .text-success { color: var(--success-color); }
    .text-danger { color: var(--danger-color); }
    .text-warning { color: var(--warning-color); }
    .text-muted { color: var(--text-muted); }

    @media (max-width: 768px) {
        .text-xxl { font-size: var(--font-xxl-mobile); }
        .text-xl { font-size: var(--font-xl-mobile); }
        .text-lg { font-size: var(--font-lg-mobile); }
        .text-md { font-size: var(--font-md-mobile); }
        .text-base { font-size: var(--font-base-mobile); }
        .text-sm { font-size: var(--font-sm-mobile); }
        .text-xs { font-size: var(--font-xs-mobile); }
        .text-xxs { font-size: var(--font-xxs-mobile); }
    }

    /* ===========================================
       9. Badges & Tags (徽章與標籤)
       =========================================== */
    
    .badge {
        display: inline-block;
        padding: var(--space-xs) var(--space-sm);
        border-radius: var(--radius-md);
        font-size: var(--font-xxs);
        font-weight: 600;
    }

    .badge-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }

    .badge-success {
        background: var(--success-color);
        color: white;
    }

    .badge-danger {
        background: var(--danger-color);
        color: white;
    }

    .badge-warning {
        background: var(--warning-color);
        color: white;
    }

    .badge-latest {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
    }

    /* ===========================================
       10. Charts & Visualizations (圖表)
       =========================================== */
    
    .chart-container {
        background: var(--card-bg);
        border-radius: var(--radius-md);
        padding: var(--space-xl);
        margin-bottom: var(--space-xxl);
        box-shadow: var(--shadow-sm);
        border: 1px solid var(--border-color);
    }

    .chart-title {
        font-size: var(--font-base);
        font-weight: 600;
        margin-bottom: var(--space-lg);
        padding-bottom: var(--space-lg);
        border-bottom: var(--border-width) solid var(--border-color);
    }

    @media (max-width: 768px) {
        .chart-container {
            padding: var(--space-sm-mobile);
            margin-bottom: var(--space-xxl-mobile);
        }
        .chart-title {
            font-size: var(--font-sm-mobile);
            margin-bottom: var(--space-lg-mobile);
        }
    }

    /* ===========================================
       11. Buttons & Links (按鈕與連結)
       =========================================== */
    
    .btn {
        display: inline-flex;
        align-items: center;
        gap: var(--space-xs);
        padding: var(--space-lg) var(--space-xl);
        border-radius: var(--radius-sm);
        font-weight: 600;
        text-decoration: none;
        transition: all var(--transition-speed) ease;
        cursor: pointer;
        border: none;
    }

    .btn-primary {
        background: var(--primary-color);
        color: white;
    }

    .btn-primary:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }

    .btn-ghost {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .btn-ghost:hover {
        background: rgba(255, 255, 255, 0.3);
    }

    /* ===========================================
       12. Special Components (特殊組件)
       =========================================== */
    
    /* 12.1 Gradient Section Background */
    .gradient-primary {
        background: linear-gradient(135deg, #dbeafe 0%, var(--primary-color) 100%);
    }

    .gradient-success {
        background: linear-gradient(135deg, #dcfce7 0%, var(--success-color) 100%);
    }

    .gradient-danger {
        background: linear-gradient(135deg, #fee2e2 0%, var(--danger-color) 100%);
    }

    .gradient-warning {
        background: linear-gradient(135deg, #fef3c7 0%, var(--warning-color) 100%);
    }

    .gradient-purple {
        background: linear-gradient(135deg, #ede9fe 0%, var(--purple-color) 100%);
    }

    /* 12.2 Scrollable Container */
    .scrollable {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: thin;
        scrollbar-color: var(--primary-color) transparent;
    }

    .scrollable::-webkit-scrollbar {
        height: 4px;
        width: 4px;
    }

    .scrollable::-webkit-scrollbar-thumb {
        background: var(--primary-color);
        border-radius: 5px;
    }

    .scrollable::-webkit-scrollbar-track {
        background: transparent;
    }

    /* 12.3 Empty State */
    .empty-state {
        text-align: center;
        padding: var(--space-xxxl) var(--space-lg);
        color: var(--text-muted);
    }

    .empty-state-icon {
        font-size: var(--font-xxl);
        margin-bottom: var(--space-md);
        opacity: 0.5;
    }

    .empty-state-text {
        font-size: var(--font-sm);
        margin-bottom: var(--space-xs);
    }

    .empty-state-hint {
        font-size: var(--font-xs);
        color: var(--text-muted);
    }

    /* ===========================================
       13. Utilities (工具類)
       =========================================== */
    
    /* Spacing */
    .mb-0 { margin-bottom: 0; }
    .mb-sm { margin-bottom: var(--space-sm); }
    .mb-md { margin-bottom: var(--space-md); }
    .mb-lg { margin-bottom: var(--space-lg); }
    .mb-xl { margin-bottom: var(--space-xl); }
    .mb-xxl { margin-bottom: var(--space-xxl); }

    .mt-0 { margin-top: 0; }
    .mt-sm { margin-top: var(--space-sm); }
    .mt-md { margin-top: var(--space-md); }
    .mt-lg { margin-top: var(--space-lg); }
    .mt-xl { margin-top: var(--space-xl); }

    .p-sm { padding: var(--space-sm); }
    .p-md { padding: var(--space-md); }
    .p-lg { padding: var(--space-lg); }
    .p-xl { padding: var(--space-xl); }

    /* Display */
    .hidden { display: none; }
    .block { display: block; }
    .inline-block { display: inline-block; }

    /* Text alignment */
    .text-left { text-align: left; }
    .text-center { text-align: center; }
    .text-right { text-align: right; }

    /* Border radius */
    .rounded-sm { border-radius: var(--radius-sm); }
    .rounded-md { border-radius: var(--radius-md); }
    .rounded-lg { border-radius: var(--radius-lg); }

    /* Shadows */
    .shadow-sm { box-shadow: var(--shadow-sm); }
    .shadow-md { box-shadow: var(--shadow-md); }
    .shadow-lg { box-shadow: var(--shadow-lg); }

    /* ===========================================
       14. Footer (頁尾)
       =========================================== */
    
    footer {
        text-align: center;
        color: white;
        margin-top: var(--space-xxxl);
        padding: var(--space-lg);
    }

    footer a {
        color: white;
        text-decoration: underline;
    }

    footer p {
        margin-bottom: var(--space-xs);
    }
</style>
